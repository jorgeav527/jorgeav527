<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>ECS &amp; EKS :: REcords, Inc.</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="You want to know how to implement ECS or EKS, using Ansible, Terraform and AWS following best practices" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://jorgeav527.xyz/posts/13/" />





  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/buttons.min.2bc533403a27dfe0e93105a92502b42ce4587e2e4a87d9f7d349e51e16e09478.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/code.min.00125962708925857e7b66dbc58391d55be1191a3d0ce2034de8c9cd2c481c36.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/fonts.min.4881f0c525f3ce2a1864fb6e96676396cebe1e6fcef1933e8e1dde7041004fb5.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/footer.min.2e3eb191baee58dd05a9f0104ac1fab0827bca7c64dafe0b2579f934c33a1d69.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/header.min.b6fb4423cf82a9f9d7abc9cd010223fa3d70a6526a3f28f8e17d814c06e18f9e.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/main.min.fe8dc560fccb53a458b0db19ccb7b265764ac46b68596b7e099c6793054dd457.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/menu.min.83637a90d903026bc280d3f82f96ceb06c5fc72b7c1a8d686afb5bbf818a29f7.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/pagination.min.82f6400eae7c7c6dc3c866733c2ec0579e4089608fea69400ff85b3880aa0d3c.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/post.min.fc74ca360273c1d828da3c02b8174eba435607b369d98418ccc6f2243cd4e75d.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/prism.min.9023bbc24533d09e97a51a0a42a5a7bfe4c591ae167c5551fb1d2191d11977c0.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/syntax.min.cc789ed9377260d7949ea4c18781fc58959a89287210fe4edbff44ebfc1511b6.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/terminal.min.4b367d85d0d0061435650561285afed36c46a7cf8dc6d7ed5642d98e589fa622.css">

  
  <link rel="stylesheet" href="https://jorgeav527.xyz/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">







<link rel="shortcut icon" href="https://jorgeav527.xyz/favicon.png">
<link rel="apple-touch-icon" href="https://jorgeav527.xyz/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="ECS &amp; EKS">
<meta property="og:description" content="You want to know how to implement ECS or EKS, using Ansible, Terraform and AWS following best practices" />
<meta property="og:url" content="https://jorgeav527.xyz/posts/13/" />
<meta property="og:site_name" content="REcords, Inc." />

  
  
  <meta property="og:image" content="https://jorgeav527.xyz/">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-03-06 15:45:35 -0500 -05" />












</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/about">
  <div class="logo">
    cords527/
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/posts">Posts</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/posts" >Posts</a></li>
        
      
        
          <li><a href="/projects" >Projects</a></li>
        
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://jorgeav527.xyz/posts/13/">ECS &amp; EKS</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-03-06</time></div>

  
    <span class="post-tags">
      
      #<a href="https://jorgeav527.xyz/tags/aws/">AWS</a>&nbsp;
      
      #<a href="https://jorgeav527.xyz/tags/cluster/">Cluster</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <h1 id="ecs-vs-eks">ECS vs EKS<a href="#ecs-vs-eks" class="hanchor" ariaLabel="Anchor">#</a> </h1>
<p>First lesson take a look at the following diagram is a simple ECS cluster with a fastAPI, grafana, prometheus, redpanda-console, redpanda broker and a Axium API.
We will see how to setup a ECS cluster using this services, with the AWS console and with Terraform.</p>
<h2 id="ecs">ECS<a href="#ecs" class="hanchor" ariaLabel="Anchor">#</a> </h2>
<ol>
<li>Understanding the architecture</li>
</ol>
<p>We will use two APIs, a message broker for streaming data, and a monitoring system with Prometheus and Grafana, but first we need to understand the needs of each service.</p>
<ul>
<li>APIs: We have one API for the application and one for monitoring and get information.</li>
<li>Message Broker: We need a message broker to stream data between services, in the past we used Kafka (it was very dificult to setup because of the complexity of the configuration, and it was not fast enough), and redis pub/sub (in the API and docker we have incompatible for linux and mac because of OPENSSL package).</li>
<li>Monitoring: We need a monitoring system to monitor the health of our services.</li>
</ul>



  <div class="collapsable-code">
    <input id="651478239" type="checkbox"  />
    <label for="651478239">
      <span class="collapsable-code__language">bash</span>
      <span class="collapsable-code__title">Error with OPENSSL package and Redis</span>
      <span class="collapsable-code__toggle" data-label-expand="△" data-label-collapse="▽"></span>
    </label>
    <pre class="language-bash" ><code>
    openssl::ssl::SslStream&lt;S&gt;::read_uninit&#39;:
    215.9           sqlx_postgres.db90206912fb9d19-cgu.13:(.text._ZN7openssl3ssl18SslStream$LT$S$GT$11read_uninit17h8195d4e4fd2c0fa9E&#43;0x2d): undefined reference to SSL_read_ex&#39;
    ...
    215.9 error: could not compile roadr_rs (bin &#34;roadr_rs&#34;) due to 1 previous error
    ------
    ERROR: failed to solve: process &#34;/bin/sh -c cargo build --release&#34; did not complete successfully: exit code: 101
    Error: buildx failed with: ERROR: failed to solve: process &#34;/bin/sh -c cargo build --release&#34; did not complete successfully: exit code: 101
  </code></pre>
  </div>


<ul>
<li>Monitoring: We need a monitoring system to monitor the health of our services.</li>
</ul>
<ol start="2">
<li>Setting up the ECS cluster</li>
</ol>
<p><img src="https://i.imgur.com/jE0F9rb.png" alt="Imgur"></p>
<p><img src="https://i.imgur.com/KwqUAYm.png" alt="Imgur"></p>

<img src="https://i.imgur.com/jE0F9rb.png"  alt="Hello Friend"  class="center"  style="border-radius: 8px;"    />



      </div></div>

  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025</span>
    
      <span> -> GitHub user <a href="https://github.com/jorgeav527" target="_blank">jorgeav527</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
